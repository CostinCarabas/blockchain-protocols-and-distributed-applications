"use strict";(self.webpackChunkblockchain_protocols_and_distributed_applications=self.webpackChunkblockchain_protocols_and_distributed_applications||[]).push([[7891],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>y});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),s=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=s(e.components);return a.createElement(o.Provider,{value:n},e.children)},u="mdxType",b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(t),d=r,y=u["".concat(o,".").concat(d)]||u[d]||b[d]||i;return t?a.createElement(y,c(c({ref:n},p),{},{components:t})):a.createElement(y,c({ref:n},p))}));function y(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,c=new Array(i);c[0]=d;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l[u]="string"==typeof e?e:r,c[1]=l;for(var s=2;s<i;s++)c[s]=t[s];return a.createElement.apply(null,c)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},2741:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>b,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=t(7462),r=(t(7294),t(3905));const i={},c="Basic Wallet",l={unversionedId:"Practical Sessions/Basic Peer-to-Peer Blockchain/basic_wallet",id:"Practical Sessions/Basic Peer-to-Peer Blockchain/basic_wallet",title:"Basic Wallet",description:"To create a public key with which we can display our financial gain in the internet we need first to generate a private key using an algorithm, the private key will generate the public key and\u2026from now on we can apply a hash on it and remove some character from behind and add 0x in front to know that this is a public address.",source:"@site/docs/Practical Sessions/Basic Peer-to-Peer Blockchain/basic_wallet.md",sourceDirName:"Practical Sessions/Basic Peer-to-Peer Blockchain",slug:"/Practical Sessions/Basic Peer-to-Peer Blockchain/basic_wallet",permalink:"/blockchain-protocols-and-distributed-applications/Practical Sessions/Basic Peer-to-Peer Blockchain/basic_wallet",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Mining a block",permalink:"/blockchain-protocols-and-distributed-applications/Practical Sessions/Basic Peer-to-Peer Blockchain/mining"},next:{title:"Transactions",permalink:"/blockchain-protocols-and-distributed-applications/Practical Sessions/Basic Peer-to-Peer Blockchain/transactions"}},o={},s=[],p={toc:s},u="wrapper";function b(e){let{components:n,...i}=e;return(0,r.kt)(u,(0,a.Z)({},p,i,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"basic-wallet"},"Basic Wallet"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(7411).Z,width:"720",height:"303"})),(0,r.kt)("p",null,"To create a public key with which we can display our financial gain in the internet we need first to generate a private key using an algorithm, the private key will generate the public key and\u2026from now on we can apply a hash on it and remove some character from behind and add 0x in front to know that this is a public address."),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(5112).Z,width:"720",height:"239"}),"\n",(0,r.kt)("img",{src:t(4625).Z,width:"784",height:"339"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'/function to create a public and private key\nfunc CreateKeyPair() (crypto.PrivKey, crypto.PubKey, error) {\n //   Create a private and public key pair\n priv, pub, err := crypto.GenerateKeyPair(crypto.RSA, 2048)\n if err != nil {\n  return nil, nil, err\n }\n\n return priv, pub, nil\n}\n\nfunc CreatePairPublicPrivateKey() ([]byte, []byte) {\n\n //create a private and public key\n priv, pub, err := CreateKeyPair()\n if err != nil {\n  panic(err)\n }\n\n //convert private key to bytes\n privBytes, err := crypto.MarshalPrivateKey(priv)\n if err != nil {\n  panic(err)\n }\n\n //convert public key to bytes\n pubBytes, err := crypto.MarshalPublicKey(pub)\n if err != nil {\n  panic(err)\n }\n\n //list of bytes to string\n privString := hex.EncodeToString(privBytes)\n pubString := hex.EncodeToString(pubBytes)\n\n //create a wallet variable\n wallet := types.Wallet{\n  PrivateKey: []byte(privString),\n  PublicKey:  []byte(pubString),\n }\n //convert wallet to bytes marshal\n walletBytes, _ := json.Marshal(wallet)\n\n //put wallet in the db\n fileop.PutInDB("db/usr", []byte("wallet1"), walletBytes)\n\n return []byte(pubString), []byte(privString)\n\n} \n\n')),(0,r.kt)("p",null,"For generating privateKey and publicKey we will use RSA because is very common and is easy to understand then we store the data into a wallet struct and the struct will be stored on our local storage."),(0,r.kt)("p",null,"So well we will mine a block we will get the first transaction from coinbase"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{"BlockNumber":0,\n"Time":1668970059,\n"Hash":"06c6836e73c1676d58f938fd17a91224b50e5de97623dcc80c4f48d6eb96e052",\n"Inputs":[{"Txid":0,"Value":1,"Signature":"","PubKey":"coinbase"}],\n"Outputs":[{"Txid":0,"Value":1,"PubKeyHash":"0x2432\\n","Signature":""}]\n}\n\n')),(0,r.kt)("p",null,"Every input and output transactions will be signed, so this will be saw by everyone from the blockchain, we will cache this on our wallet because we will be easy when we want to create a transaction."),(0,r.kt)("p",null,"In bitcoin there isn\u2019t the idea of a balance like having 200 bitcoin, when you send a transaction you also send how you get that money.(we can see how the money where spent."),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(2121).Z,width:"682",height:"385"})),(0,r.kt)("p",null,"Our wallet when is creating transaction 3 will say the input from transaction1 and transaction2 and the the outputs like in the json above."),(0,r.kt)("p",null,"Here is an example of a real bitcoin transaction. Also you signed with your private key what you send to the other peers."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\n{\n    "txid": "1b3cb78e7d6cad2cc2050e6dccc2bd5845e98f598062d19fbda8e0a3b5b4b0e6",\n    "hash": "9d046215268a1d8031c6b4835a68c9c8c6984b576dc82ec37f859e636ec6e660",\n    "version": 1,\n    "size": 368,\n    "vsize": 341,\n    "weight": 1364,\n    "locktime": 1064830807,\n    "vin": [\n        {\n            "coinbase": "039ea80b2cfabe6d6df2adbfb95872a2c4bf41bd0af61255f06bc31f0aa11d1c2b11fe673f0a94af3e10000000f09f909f092f4632506f6f6c2f73000000000000000000000000000000000000000000000000000000000000000000000005001d000000",\n            "txinwitness": [\n                "0000000000000000000000000000000000000000000000000000000000000000"\n            ],\n            "sequence": 0\n        }\n    ],\n    "vout": [\n        {\n            "value": 6.28864092,\n            "n": 0,\n            "scriptPubKey": {\n                "asm": "OP_DUP OP_HASH160 c825a1ecf2a6830c4401620c3a16f1995057c2ab OP_EQUALVERIFY OP_CHECKSIG",\n                "hex": "76a914c825a1ecf2a6830c4401620c3a16f1995057c2ab88ac",\n                "address": "1KFHE7w8BhaENAswwryaoccDb6qcT6DbYY",\n                "type": "pubkeyhash"\n            }\n        },\n        {\n            "value": 0,\n            "n": 1,\n            "scriptPubKey": {\n                "asm": "OP_RETURN aa21a9ed7c2862196195aa9d4d8b947653d3548ffe4c111d5669a6ec2c96f12f91672884",\n                "hex": "6a24aa21a9ed7c2862196195aa9d4d8b947653d3548ffe4c111d5669a6ec2c96f12f91672884",\n                "type": "nulldata"\n            }\n        },\n        {\n            "value": 0,\n            "n": 2,\n            "scriptPubKey": {\n                "asm": "OP_RETURN 48617468cd302e8d060f04304c01afa1fd1a73a8538f6eee545aa1c0a97e54fa4db86856",\n                "hex": "6a2448617468cd302e8d060f04304c01afa1fd1a73a8538f6eee545aa1c0a97e54fa4db86856",\n                "type": "nulldata"\n            }\n        },\n        {\n            "value": 0,\n            "n": 3,\n            "scriptPubKey": {\n                "asm": "OP_RETURN 52534b424c4f434b3a8350e01a86adc281c624fc5e9e1ba740ac5c1a38c0413a51b5ab342800498b80",\n                "hex": "6a4c2952534b424c4f434b3a8350e01a86adc281c624fc5e9e1ba740ac5c1a38c0413a51b5ab342800498b80",\n                "type": "nulldata"\n            }\n        }\n    ]\n}  \n')),(0,r.kt)("p",null,"This is our code for the signing of the transactions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'func SingUsingKey(privateKey []byte, publicKey []byte, data []byte) []byte {\n if GetPrivateKeyAndValidatePublicKey(publicKey) {\n  //decode private key\n  privKeyBytes, _ := hex.DecodeString(string(privateKey))\n  //unmarshal private key\n  privKey, err := crypto.UnmarshalPrivateKey(privKeyBytes)\n  if err != nil {\n   log.Printf("Error unmarshalling private key: %s", err)\n   return nil\n  }\n\n  //sign data\n  signature, err := privKey.Sign(data)\n  if err != nil {\n   log.Printf("Error signing data: %s", err)\n   return nil\n  }\n\n  return signature\n\n } else {\n  fmt.Println("Public key does not match private key")\n  return nil\n }\n\n}\n\nfunc VerifySign(signature []byte, publicKey []byte, data []byte) bool {\n\n pubKey, err := crypto.UnmarshalPublicKey(publicKey)\n if err != nil {\n  log.Printf("Error unmarshalling public key: %s", err)\n  return false\n }\n\n //verify signature\n verify, err := pubKey.Verify(data, signature)\n if err != nil {\n  return false\n }\n\n return verify\n}\n\n')))}b.isMDXComponent=!0},7411:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/wallet-5df78d98ecd3509b3c67fa0a5623ca0d.webp"},5112:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/wallet2-fc6b731dcf6be0e2db193f35f4aa8860.webp"},4625:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/wallet3-91612968a1d904dd275f34b066dfdca2.webp"},2121:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/wallet4-b80233addb988f1f9316c19878536587.webp"}}]);